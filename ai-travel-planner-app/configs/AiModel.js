const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location :Las Vegas, NV, USA, for 3 Days and 2 for A Couple with a Moderate with a Flight details , Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, description and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time travel each of the location for 3 days and 2 night with each day plan with best time to visit in JSON format\n",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a detailed Las Vegas travel plan for a couple, spanning 3 days and 2 nights, with a moderate budget. I\'ve included flight details, hotel options, and a day-by-day itinerary with attractions, estimated costs, and travel times.  Since dynamic flight pricing and hotel availability change rapidly, the provided flight and hotel prices are estimates. Always check current prices and availability on booking websites before making reservations.\n\n**Important Notes:**\n\n*   **Budget:** "Moderate" is subjective. I\'m assuming a budget of roughly $200-300/day excluding flights, but feel free to adjust the activities and hotel choices.\n*   **Flexibility:** This is a suggestion.  Customize it to your interests.\n*   **Reservations:** Make reservations for shows, popular restaurants, and tours in advance, especially if traveling during peak season.\n*   **Transportation:**  Consider ride-sharing (Uber/Lyft), the Las Vegas Monorail, or the Deuce bus for getting around. Walking is also viable on the Strip.\n*   **Hydration:** It\'s the desert! Drink plenty of water.\n\n```json\n{\n  "tripName": "Las Vegas Getaway for Two",\n  "location": "Las Vegas, NV, USA",\n  "duration": "3 Days, 2 Nights",\n  "travelers": "Couple",\n  "budget": "Moderate",\n  "flightDetails": {\n    "departureCity": "Your Departure City",\n    "arrivalCity": "Las Vegas (LAS)",\n    "estimatedPrice": 300,\n    "bookingUrl": "https://www.google.com/flights",\n    "notes": "Flight prices vary significantly. Use Google Flights, Kayak, or similar websites to find the best deals.  Book in advance for better rates."\n  },\n  "hotelOptions": [\n    {\n      "hotelName": "The LINQ Hotel + Experience",\n      "address": "3535 Las Vegas Blvd S, Las Vegas, NV 89109",\n      "price": 150,\n      "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/16/e8/04/55/the-linq-hotel-experience.jpg?w=700&h=-1&s=1",\n      "geoCoordinates": {\n        "latitude": 36.1161,\n        "longitude": -115.1692\n      },\n      "rating": 4.0,\n      "description": "Modern hotel on the Strip with a lively atmosphere, featuring the High Roller observation wheel. Offers a variety of dining and entertainment options.",\n      "nearbyPlaces": [\n        {"placeName": "High Roller Observation Wheel", "distance": "On-site"},\n        {"placeName": "The Venetian/Palazzo", "distance": "0.5 miles"}\n      ]\n    },\n    {\n      "hotelName": "Park MGM Las Vegas",\n      "address": "3770 Las Vegas Blvd S, Las Vegas, NV 89109",\n      "price": 180,\n      "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/15/75/13/71/park-mgm-las-vegas.jpg?w=700&h=-1&s=1",\n      "geoCoordinates": {\n        "latitude": 36.1027,\n        "longitude": -115.1756\n      },\n      "rating": 4.5,\n      "description": "Stylish and smoke-free hotel with a great pool area, restaurants, and entertainment options, including the Park Theater.",\n      "nearbyPlaces": [\n        {"placeName": "T-Mobile Arena", "distance": "0.2 miles"},\n        {"placeName": "Bellagio Conservatory & Botanical Garden", "distance": "0.6 miles"}\n      ]\n    },\n    {\n      "hotelName": "Flamingo Las Vegas",\n      "address": "3555 Las Vegas Blvd S, Las Vegas, NV 89109",\n      "price": 120,\n      "imageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/27/87/9a/4a/flamingo-las-vegas.jpg?w=700&h=-1&s=1",\n      "geoCoordinates": {\n        "latitude": 36.1170,\n        "longitude": -115.1751\n      },\n      "rating": 3.5,\n      "description": "Iconic hotel with a central location, a wildlife habitat with flamingos, and a variety of dining and entertainment choices.  More budget-friendly.",\n      "nearbyPlaces": [\n        {"placeName": "The LINQ Promenade", "distance": "0.1 miles"},\n        {"placeName": "Caesars Palace", "distance": "0.3 miles"}\n      ]\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "Exploring the Strip & High Roller",\n      "morning": {\n        "time": "9:00 AM",\n        "activity": "Arrive at Las Vegas McCarran International Airport (LAS). Check into your hotel.",\n        "details": "Take a taxi, ride-sharing service, or the airport shuttle to your hotel.  Leave your luggage and freshen up.",\n        "estimatedCost": 25,\n        "travelTime": "15-20 minutes (to the Strip)"\n      },\n      "afternoon": {\n        "time": "12:00 PM",\n        "activity": "Lunch at In-N-Out Burger",\n        "details": "Classic California burger chain. Budget-friendly and a must-try for first-timers.",\n        "estimatedCost": 20,\n        "travelTime": "Varies depending on location"\n      },\n      "lateAfternoon": {\n        "time": "2:00 PM",\n        "activity": "Explore the LINQ Promenade & Ride the High Roller",\n        "details": "Browse the shops and restaurants at the LINQ Promenade.  Take a ride on the High Roller observation wheel for stunning views of the Strip and surrounding area.",\n        "placeName": "High Roller Observation Wheel",\n        "placeDetails": "Giant observation wheel offering 360-degree views of Las Vegas.",\n        "placeImageUrl": "https://www.caesars.com/content/dam/linq/Things%20To%20Do/attractions/high-roller/high-roller-exterior-day-740x416.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1161,\n          "longitude": -115.1692\n        },\n        "ticketPricing": 37,\n        "travelTime": "On-site",\n        "bestTimeToVisit": "Afternoon/Evening"\n      },\n      "evening": {\n        "time": "7:00 PM",\n        "activity": "Dinner at a Restaurant at LINQ Promenade",\n        "details": "Choose from a variety of restaurants at the LINQ Promenade. Consider Yard House for American cuisine or Flour & Barley for pizza.",\n        "estimatedCost": 60\n      },\n      "night": {\n        "time": "9:00 PM",\n        "activity": "Fountains of Bellagio",\n        "details": "Witness the spectacular Fountains of Bellagio show. Free and mesmerizing.",\n        "placeName": "Fountains of Bellagio",\n        "placeDetails": "Iconic water show choreographed to music and lights.",\n        "placeImageUrl": "https://media.cntraveler.com/photos/58db9f45b6547b5d843d4363/16:9/w_2560%2Cc_limit/fountains-of-bellagio-las-vegas-cr-getty.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1127,\n          "longitude": -115.1743\n        },\n        "ticketPricing": "Free",\n        "travelTime": "10-15 minutes (walk or ride-share from LINQ)",\n        "bestTimeToVisit": "Evening (shows run frequently)"\n      }\n    },\n    "day2": {\n      "theme": "Downtown & Show",\n      "morning": {\n        "time": "9:00 AM",\n        "activity": "Breakfast at a Cafe",\n        "details": "Enjoy breakfast at a cafe near your hotel.",\n        "estimatedCost": 25\n      },\n      "lateMorning": {\n        "time": "10:30 AM",\n        "activity": "Visit the Neon Museum",\n        "details": "Explore the Neon Museum, a graveyard of vintage Las Vegas signs. Book tickets in advance.",\n        "placeName": "The Neon Museum",\n        "placeDetails": "Museum dedicated to preserving iconic Las Vegas signs.",\n        "placeImageUrl": "https://neonmuseum.org/wp-content/uploads/2021/04/NeonMuseum_Main_017-scaled.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1606,\n          "longitude": -115.1496\n        },\n        "ticketPricing": 30,\n        "travelTime": "20-30 minutes (ride-share from the Strip)",\n        "bestTimeToVisit": "Morning (less crowded)"\n      },\n      "afternoon": {\n        "time": "1:00 PM",\n        "activity": "Explore Fremont Street Experience",\n        "details": "Experience the Fremont Street Experience, a pedestrian mall with a giant LED canopy showing dazzling visuals and light shows.",\n        "placeName": "Fremont Street Experience",\n        "placeDetails": "Pedestrian mall with a massive LED canopy and free entertainment.",\n        "placeImageUrl": "https://www.vegasexperience.com/wp-content/uploads/2023/09/Main_Image_Vegas_Experience.jpg",\n        "geoCoordinates": {\n          "latitude": 36.1702,\n          "longitude": -115.1421\n        },\n        "ticketPricing": "Free (for the Fremont Street Experience)",\n        "travelTime": "Walk from the Neon Museum",\n        "bestTimeToVisit": "Afternoon/Evening (for the light shows)"\n      },\n      "lateAfternoon": {\n        "time": "3:00 PM",\n        "activity": "Lunch at Heart Attack Grill",\n        "details": "For a uniquely Vegas (and somewhat controversial) experience, grab lunch at the Heart Attack Grill (if you dare!).",\n        "estimatedCost": 30\n      },\n      "evening": {\n        "time": "6:00 PM",\n        "activity": "Pre-Show Dinner",\n        "details": "Enjoy a pre-show dinner at a restaurant near your chosen show venue.",\n        "estimatedCost": 70\n      },\n      "night": {\n        "time": "8:00 PM",\n        "activity": "Las Vegas Show",\n        "details": "Attend a Las Vegas show. Options include Cirque du Soleil, magic shows, concerts, or comedy shows. Book in advance!",\n        "estimatedCost": 150,\n        "bookingUrl": "https://www.vegas.com/shows/",\n        "notes": "Show prices vary widely. Check Vegas.com or individual show websites for schedules and tickets."\n      }\n    },\n    "day3": {\n      "theme": "Relaxation & Departure",\n      "morning": {\n        "time": "9:00 AM",\n        "activity": "Relax by the Pool",\n        "details": "Enjoy some relaxation time by your hotel\'s pool. Las Vegas pools are a highlight!",\n        "estimatedCost": 0\n      },\n      "lateMorning": {\n        "time": "11:00 AM",\n        "activity": "Brunch",\n        "details": "Enjoy a leisurely brunch at one of Las Vegas\'s many brunch spots.",\n        "estimatedCost": 50\n      },\n      "afternoon": {\n        "time": "1:00 PM",\n        "activity": "Shopping",\n        "details": "Do some souvenir shopping at the shops along the Strip.",\n        "estimatedCost": "Variable",\n        "notes": "The Forum Shops at Caesars and the Grand Canal Shoppes at the Venetian are popular choices."\n      },\n      "lateAfternoon": {\n        "time": "3:00 PM",\n        "activity": "Check out from Hotel",\n        "details": "Check out from your hotel.",\n        "estimatedCost": 0\n      },\n      "evening": {\n        "time": "4:00 PM",\n        "activity": "Depart from Las Vegas",\n        "details": "Head to McCarran International Airport (LAS) for your departure flight.",\n        "estimatedCost": 25,\n        "travelTime": "15-20 minutes (to the airport)"\n      }\n    }\n  },\n  "notes": "Remember to gamble responsibly. Always check the latest COVID-19 related travel advisories and restrictions before your trip."\n}\n```\n\n**How to Use This Plan:**\n\n1.  **Customize:** Tailor the activities, restaurants, and shows to your specific interests and budget.\n2.  **Book:** Book flights, hotels, and shows well in advance, especially during peak season.\n3.  **Transportation:** Plan your transportation options in advance to save time and money.\n4.  **Enjoy!** Have a fantastic time in Las Vegas!\n',
        },
      ],
    },
  ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());
